syntax = "proto3";

package users;

import "google/protobuf/timestamp.proto";

option java_package = "pl.bpiatek.contracts.user";
option java_outer_classname = "UserLifecycleEventProto";

/*
 * Published to "user-lifecycle-events" on user registration, password reset, etc.
 */
message UserLifecycleEvent {
  string event_id = 1; // Unique ID for idempotency and tracing
  google.protobuf.Timestamp event_timestamp = 2;

  oneof event_payload {
    UserRegistered user_registered = 3;
    // PasswordResetRequested password_reset_requested = 4; // Stub for future
    // UserPasswordChanged user_password_changed = 5;      // Stub for future
  }
}

/**
 * Published when a new user is trying to register
 */
message UserRegistered {
  // The unique identifier of the user (e.g., UUID).
  string user_id = 1;

  // The email of the user
  string email = 2;

  // verification token for user
  string verification_token = 3;
}